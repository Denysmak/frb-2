<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>evaluación</title>
    <link rel="stylesheet" href="mainPage.css">
    <link rel="icon" href="./imagens/app/star-solid.svg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <link rel="stylesheet" id="font-awesome-5-all-css" href="css/all.min.css" media="all">  
</head>
<body>
    <nav>
        <div class="menu">
            <div class="left"><img decoding="async" src="imagens/app/user-circle (1).png" alt="logo" class="logo"></div>
            <div class="right"><div class="money"><img src="./imagens/app/moedaa.png" alt=""><h3>$ <span id="qtdDinheiro">38.00</span></h3></div></div>
        </div>
    </nav>
    <main>
        <div id="imagemContainer">
            <img src="./imagens/capturas/Captura de Tela 2024-06-22 às 14.31.31.png" alt="">
        </div>
        <p>De 1 à 5, quelle note donnez-vous à cette publicité ?​</p>
        <div class="botoesAvaliacao">
            <div class="containerBotaoAvaliacao">
                <svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge bg-red-700 rounded-md !text-white css-6flbmm" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SentimentVeryDissatisfiedIcon" style="background-color: rgb(228, 51, 51);"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5z"></path></svg>
            </div>
            <div class="containerBotaoAvaliacao">
                <svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge bg-orange-800 rounded-md !text-white css-6flbmm" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SentimentDissatisfiedIcon" style="background-color: rgb(221, 95, 11);"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-3.5c.73 0 1.39.19 1.97.53.12-.14.86-.98 1.01-1.14-.85-.56-1.87-.89-2.98-.89-1.11 0-2.13.33-2.99.88.97 1.09.01.02 1.01 1.14.59-.33 1.25-.52 1.98-.52z"></path></svg>
            </div>
            <div class="containerBotaoAvaliacao">
                <svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge bg-amber-800 rounded-md !text-white css-6flbmm" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SentimentSatisfiedIcon" style="background-color: rgb(201, 134, 58);"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-4c-.73 0-1.38-.18-1.96-.52-.12.14-.86.98-1.01 1.15.86.55 1.87.87 2.97.87 1.11 0 2.12-.33 2.98-.88-.97-1.09-.01-.02-1.01-1.15-.59.35-1.24.53-1.97.53z"></path></svg>
            </div>
            <div class="containerBotaoAvaliacao">
                <svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge bg-amber-400 rounded-md !text-white css-6flbmm" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SentimentSatisfiedAltOutlinedIcon" style="background-color: rgb(255, 187, 0);"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M12 16c-1.48 0-2.75-.81-3.45-2H6.88c.8 2.05 2.79 3.5 5.12 3.5s4.32-1.45 5.12-3.5h-1.67c-.69 1.19-1.97 2-3.45 2zm-.01-14C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg>
            </div>
            
            <div class="containerBotaoAvaliacao">
                <svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  bg-green-300 rounded-md !text-white css-6flbmm" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="SentimentVerySatisfiedIcon" style="background-color: rgb(95, 241, 76);"><circle cx="15.5" cy="9.5" r="1.5"></circle><circle cx="8.5" cy="9.5" r="1.5"></circle><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-5-6c.78 2.34 2.72 4 5 4s4.22-1.66 5-4H7z"></path></svg>
            </div>
        </div>
    </main>
    <div id="notificacaoGanho" style="display: none;">
        <p>Évaluation soumise ! Vous avez reçu : $<span id="valorAdicionado"></span></p>
    </div>
    <div id="avisoLimiteContainer" style="display: none;">
        <div id="avisoLimite">
            <img src="./imagens/app/yellow-triangle-warning-sign-icon-isolated.png" alt="">
            <h4>PLAFOND JOURNALIER ATTEINT</h4>
            <p>Vous devez retirer votre solde pour aujourd'hui ?</p>
            <button id="botaoRetirarDinheiro">RETIRER MAINTENANT</button>
            <small>Ou attendez 24 heures pour continuer à évaluer</small>
        </div>
    </div>
    <script>
            document.addEventListener('DOMContentLoaded', function() {
        const botaoRetirarDinheiro = document.getElementById('botaoRetirarDinheiro');
        
        botaoRetirarDinheiro.addEventListener('click', function() {
            // Envia uma mensagem para o documento pai
            window.parent.postMessage('changeToRetificar', '*');
            console.log('teste')
        });
    });
        document.addEventListener("DOMContentLoaded", function() {
            var email = localStorage.getItem('currentEmail');

            function escolherImagemAleatoria() {
                var imagens = [
                    'Captura de Tela 2024-06-22 às 14.31.31.png',
                    'Captura de Tela 2024-06-22 às 14.31.39.png',
                    'Captura de Tela 2024-06-22 às 14.32.09.png',
                    'Captura de Tela 2024-06-22 às 14.32.21.png',
                    'Captura de Tela 2024-06-22 às 14.32.50.png',
                    'Captura de Tela 2024-06-22 às 14.33.29.png',
                    'Captura de Tela 2024-06-22 às 14.34.04.png',
                    'Captura de Tela 2024-06-22 às 14.34.16.png',
                    'Captura de Tela 2024-06-22 às 14.34.20.png',
                    'Captura de Tela 2024-06-22 às 14.34.52.png',
                    'Captura de Tela 2024-06-22 às 14.34.55.png',
                    'Captura de Tela 2024-06-22 às 14.34.58.png',
                    'Captura de Tela 2024-06-22 às 14.35.07.png',
                    'Captura de Tela 2024-06-22 às 14.35.31.png',
                    'Captura de Tela 2024-06-22 às 14.35.36.png',
                    'Captura de Tela 2024-06-22 às 14.35.40.png',
                    'Captura de Tela 2024-06-22 às 14.35.44.png',
                    'Captura de Tela 2024-06-22 às 14.35.55.png',
                    'Captura de Tela 2024-06-22 às 14.36.16.png',
                    'Captura de Tela 2024-06-22 às 14.36.20.png',
                    'Captura de Tela 2024-06-22 às 14.36.40.png',
                    'Captura de Tela 2024-06-22 às 14.37.28.png',
                    'Captura de Tela 2024-06-22 às 14.38.46.png',
                    'Captura de Tela 2024-06-22 às 14.38.53.png',
                    'Captura de Tela 2024-06-22 às 14.39.00.png',
                    'Captura de Tela 2024-06-22 às 14.39.08.png',
                    'Captura de Tela 2024-06-22 às 14.40.13.png',
                    'Captura de Tela 2024-06-22 às 14.40.15.png',
                    'Captura de Tela 2024-06-22 às 14.40.21.png',
                    'Captura de Tela 2024-06-22 às 14.40.30.png',
                    'Captura de Tela 2024-06-22 às 14.40.33.png',
                    'Captura de Tela 2024-06-22 às 14.40.37.png',
                    'Captura de Tela 2024-06-22 às 14.40.44.png',
                    'Captura de Tela 2024-05-13 às 10.16.52.png',
                    'Captura de Tela 2024-05-13 às 10.17.04.png',
                    'Captura de Tela 2024-05-13 às 10.17.13.png',
                    'Captura de Tela 2024-05-13 às 10.17.27.png',
                    'Captura de Tela 2024-05-13 às 10.17.54.png',
                    'Captura de Tela 2024-05-13 às 10.17.59.png',
                    'Captura de Tela 2024-05-13 às 10.18.14.png',
                    'Captura de Tela 2024-05-13 às 10.18.28.png',
                    'Captura de Tela 2024-05-13 às 10.18.39.png',
                    'Captura de Tela 2024-05-13 às 10.19.03.png',
                    'Captura de Tela 2024-05-13 às 10.22.35.png',
                    'Captura de Tela 2024-05-13 às 10.22.43.png',
                    'Captura de Tela 2024-05-13 às 10.23.03.png',
                    'Captura de Tela 2024-05-13 às 10.23.12.png',
                    'Captura de Tela 2024-05-13 às 10.23.20.png',
                    'Captura de Tela 2024-05-13 às 10.23.45.png',
                    'Captura de Tela 2024-05-13 às 10.23.54.png',
                    'Captura de Tela 2024-05-13 às 10.24.16.png',
                    'Captura de Tela 2024-05-13 às 10.24.20.png',
                    'Captura de Tela 2024-05-13 às 10.24.51.png',
                    'Captura de Tela 2024-05-13 às 10.26.03.png',
                    'Captura de Tela 2024-05-13 às 10.29.08.png',
                    'Captura de Tela 2024-05-13 às 10.29.13.png',
                    'Captura de Tela 2024-05-13 às 10.29.28.png',
                    'Captura de Tela 2024-05-13 às 10.30.15.png',
                    'Captura de Tela 2024-05-13 às 10.30.18.png',
                    'Captura de Tela 2024-05-13 às 10.30.23.png',
                    'Captura de Tela 2024-05-13 às 10.30.31.png',
                    'Captura de Tela 2024-05-13 às 10.31.00.png',
                    'Captura de Tela 2024-05-13 às 10.31.06.png',
                    'Captura de Tela 2024-05-13 às 10.31.36.png',
                    'Captura de Tela 2024-05-13 às 10.31.40.png',
                    'Captura de Tela 2024-05-13 às 10.31.46.png',
                    'Captura de Tela 2024-05-13 às 10.31.59.png',
                    'Captura de Tela 2024-05-13 às 10.32.23.png',
                    'Captura de Tela 2024-05-13 às 10.32.27.png',
                    'Captura de Tela 2024-05-13 às 10.32.30.png',
                    'Captura de Tela 2024-05-13 às 10.32.37.png'

                ];
                var index = Math.floor(Math.random() * imagens.length);
                var imagemEscolhida = imagens[index];
                var imagemContainer = document.getElementById("imagemContainer");
                imagemContainer.innerHTML = '<img src="./imagens/capturas/' + imagemEscolhida + '" alt="">';
            }

            function atualizarAvaliacao(e) {
                var qtdDinheiroElement = document.getElementById("qtdDinheiro");
                var valorAtual = parseFloat(qtdDinheiroElement.textContent);
                var valorAdicionado = Math.random() < 0.05 ? 0.03 : 0.05;
                
                var dataAtual = new Date().toLocaleDateString();
                var dataSalva = localStorage.getItem(`${email}-dataLimite`);
                var dinheiroHoje = parseFloat(localStorage.getItem(`${email}-dinheiroHoje`)) || 0;

                if (dataAtual === dataSalva) {
                    if (dinheiroHoje + valorAdicionado > 30) {
                        document.getElementById("avisoLimiteContainer").style.display = "block";
                        return;
                    }
                } else {
                    dinheiroHoje = 0;
                    localStorage.setItem(`${email}-dataLimite`, dataAtual);
                }

                dinheiroHoje += valorAdicionado;
                localStorage.setItem(`${email}-dinheiroHoje`, dinheiroHoje.toFixed(2));

                valorAtual += valorAdicionado;
                qtdDinheiroElement.textContent = valorAtual.toFixed(2);
                localStorage.setItem(`${email}-qtdDinheiro`, valorAtual.toFixed(2));  // Salva para o email atual
                
                // Atualiza e exibe a notificação
                var notificacaoGanhoElement = document.getElementById("notificacaoGanho");
                var valorAdicionadoElement = document.getElementById("valorAdicionado");
                valorAdicionadoElement.textContent = valorAdicionado.toFixed(2);
                notificacaoGanhoElement.style.display = "flex";
                
                // Esconde a notificação após 3 segundos
                setTimeout(function() {
                    notificacaoGanhoElement.style.display = "none";
                }, 3000);

                // Escolhe uma nova imagem aleatória
                escolherImagemAleatoria();
            }

            function verificarQtdDinheiroSalvo() {
                var valorSalvo = localStorage.getItem(`${email}-qtdDinheiro`);
                if (valorSalvo) {
                    var qtdDinheiroElement = document.getElementById("qtdDinheiro");
                    qtdDinheiroElement.textContent = parseFloat(valorSalvo).toFixed(2);
                }
            }

            verificarQtdDinheiroSalvo();

            var botoesAvaliacao = document.querySelectorAll(".containerBotaoAvaliacao");
            botoesAvaliacao.forEach(function(botao) {
                botao.addEventListener("click", atualizarAvaliacao);
            });
        });

        window.onload = escolherImagemAleatoria;
    </script>
</body>
</html>
